<html>
  <head>
	<meta name="viewport" content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width">
    <script src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.6/p5.js"></script>
	<script src="https://raw.githubusercontent.com/processing/p5.js-sound/master/lib/p5.sound.js"></script>

    <script src="sketch.js"></script>
  </head>
  <body>
    
    
<script>
	    
var osc, fft, m, amp,x,y;


 function setup() {
	 
createCanvas(displayWidth, displayHeight);
  osc = new p5.TriOsc(); // set frequency and type
  osc.amp(.5);

  fft = new p5.FFT();
  osc.start();
}

function touchMoved() {
	
	var waveform = fft.waveform();  // analyze the waveform
 
  for (var i = 0; i < waveform.length; i++){
     x = map(i, 0, waveform.length, 0, width);
     y = map(waveform[i], -1, 1, height, 0);
    }
  

	
	
	var m=((mouseX-pmouseX)+(mouseY-pmouseY))*5;
	background(255);
	strokeWeight(m);
	stroke(mouseX,55+mouseY*200/displayHeight,100+mouseX*155/displayWidth,60);
	line(mouseX*x, mouseY*y, pmouseX, pmouseY);
	

	stroke(100+mouseX*155/displayWidth,mouseY,55+mouseY*200/displayHeight);
	line(displayWidth-mouseX, displayHeight-mouseY, displayWidth-pmouseX, displayHeight-pmouseY,60);
	
	
	
	stroke(55+mouseY*200/displayHeight,100+mouseX*155/displayWidth,mouseY);
	line(displayWidth-mouseX, mouseY, displayWidth-pmouseX, pmouseY);
	
		
	stroke(55+mouseX*200/displayWidth,mouseX,100+mouseY*155/displayHeight);
	line(mouseX, displayHeight-mouseY, pmouseX, displayHeight-pmouseY);
	

  // change oscillator frequency based on mouseX
  var freq = map(m, 0, width, 40, 880);
  osc.freq(freq);

   amp = map(m, 0, height, 1, .01);
	osc.amp(amp);
	return false;
}
function touchEnded(){
fill(255);
	stroke(255)
	ellipse(mouseX, mouseY, 500, 500);
  // prevent default
  return false;
		

}
	  
	  </script>
  </body>
</html>



